import pandas as pd
import numpy as np
from sklearn.model_selection import train_test_split
from sklearn.linear_model import LinearRegression
from sklearn.preprocessing import LabelEncoder
dataset=pd.read_csv('C:\Program Files\JetBrains\PyCharm Community Edition 2019.3.1\price_car.csv',encoding='latin1')
dataset=dataset.replace([np.inf,-np.inf],np.nan).dropna(axis=0)
abtest=LabelEncoder()
gearbox=LabelEncoder()
fueltype=LabelEncoder()
repair=LabelEncoder()
brand=LabelEncoder()
dataset['AbTest']=abtest.fit_transform(dataset['abtest'])
dataset['Gearbox']=gearbox.fit_transform(dataset['Gearbox'])
dataset['FuelTime']=fueltype.fit_transform(dataset['fuelType'])
dataset['RepairStatus']=repair.fit_transform(dataset['NotRepaired'])
dataset['Brand']=brand.fit_transform(dataset['brand'])
x=np.array(dataset.drop(['Name','price','abtest','offerType','model','VehicleType','Gearbox','fuelType','brand','NotRepaired','PostalCode','seller'],axis='columns'))
y=np.array(dataset['price'])
x_train,x_test,y_train,y_test=train_test_split(x,y,test_size=0.3,random_state=42)
reg=LinearRegression()
reg.fit(x_train,y_train)
print(x_train)
print(dataset.keys())
print(dataset.iloc[0:30,19])
year=int(input('Enter the year of registration'))
ps=int(input('Enter horse power'))
kilometers=int(input('Enter distance travelled in kilometers'))
month=int(input('Enter month of registration'))
fuel=int(input('Enter fuel type (1 for petrol and 0 for diesel)'))
status=int(input('Enter 1 is repaired the prior damage else enter 0'))
gear=int(input('Enter Gearbox (1 for manual and 0 for automatic)'))
print('The predicted price of the vehicle is Rs',end=' ')
print(reg.predict([[year,ps,kilometers,month,gear,fuel,status,20]]))